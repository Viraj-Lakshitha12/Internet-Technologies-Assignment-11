<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Thogakade Pos System</title>
    <meta name="viewport" content="width=device-width initial scale=1">
    <link rel="stylesheet" href="assets/bootstarp/css/bootstrap.min.css">
    <link rel="stylesheet" href="assets/style/basics.css">
    <link rel="stylesheet" href="assets/fonts/css/all.min.css">
</head>
<body>

<!--navigation-->
<nav class="navbar navbar-expand-lg bg-body-tertiary navbar bg-dark i" >
    <div class="container-fluid">
        <a class="navbar-brand" id="thogakadeName" href="#">ThogaKade POS System</a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarScroll" aria-controls="navbarScroll" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarScroll">
            <ul class="navbar-nav me-auto my-2 my-lg-0 navbar-nav-scroll" style="--bs-scroll-height: 100px;">
                <li class="nav-item">
                    <a class="nav-link active" aria-current="page" href="#" id="NavOrder">Orders</a>
                </li>

                <li class="nav-item " >
                    <a class="nav-link" id="NavItem" href="#" >Item</a>
                </li>

                <li class="nav-item ">
                    <a class="nav-link " id="NavCustomer" href="#">Customer</a>
                </li>

            </ul>
            <form class="d-flex" role="search">
                <input class="form-control me-2" type="search" placeholder="Search" aria-label="Search">
                <button class="btn btn-outline-success" type="submit">Search</button>
            </form>

        </div>
    </div>
</nav>

<!--customer-->
<section id="customer">
    <h6>Home>Customers</h6>
    <div class="container-fluid">
        <div class="row" style=";background-color: #ffffff;border: 15px solid #f1f1f1;">
            <div class="col-lg-12" style="padding: 0;">
                <span style="padding-left: 10px">Customer Search</span>
            </div>
            <div class="col-lg-9">
                <input id="txtSearchCustomer" style="width: 95%;margin-left: 20px;margin-top: 20px;margin-bottom: 20px" type="text" placeholder="Input customer Name/Id Here">
            </div>
            <div class="col-lg-1">
                <button type="button" style="font-weight: bold;margin: 20px"  data-bs-target="#editCustomerModel" data-bs-toggle="modal" class="btn btn-primary">Search</button>
            </div>
        </div>
        <div class="row">
            <dic class="col-lg-1">
                <button disabled type="button" style="width: 100px;margin: 10px" data-bs-target="#editCustomerModel" data-bs-toggle="modal" id="btnCustomerEdit" class="btn btn-warning">Edit</button>
                <div id="editCustomerModel" class="modal" tabindex="-1">
                    <div class="modal-dialog">
                        <div class="modal-content">
                            <div class="modal-header" style="background-color: #3498db">
                                <h5 class="modal-title">Update Customer</h5>
                                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                            </div>
                            <div class="modal-body">
                                <div class="mb-3">
                                    <label for="txtEditCustomerID" class="form-label">Customer ID :</label>
                                    <input type="text" class="form-control" id="txtEditCustomerID" placeholder="C001">
                                </div>
                                <div class="mb-3">
                                    <label for="txtEditCustomerNIC" class="form-label">Customer NIC :</label>
                                    <input type="text" class="form-control" id="txtEditCustomerNIC" placeholder="200202502850">
                                </div>
                                <div class="mb-3">
                                    <label for="txtEditCustomerName" class="form-label">Customer Name :</label>
                                    <input type="text" class="form-control" id="txtEditCustomerName" placeholder="Viraj">
                                </div>
                                <div class="mb-3">
                                    <label for="txtEditCustomerSalary" class="form-label">Salary :</label>
                                    <input type="number" class="form-control" id="txtEditCustomerSalary" placeholder="1000000.00">
                                </div>
                                <div class="mb-3">
                                    <label for="txtEditCustomerAddress" class="form-label">Address :</label>
                                    <input type="text" class="form-control" id="txtEditCustomerAddress" placeholder="Bandaragama">
                                </div>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                                <button type="button" id="btnCustomerUpdate" class="btn btn-primary">Update</button>
                                <button type="button" id="btnCustomerDelete" data-bs-dismiss="modal" class="btn btn-danger">Delete</button>
                            </div>
                        </div>
                    </div>
                </div>
            </dic>
            <dic class="col-lg-1">
                <button type="submit" style="width: 100px;margin: 10px" data-bs-toggle="modal" data-bs-target="#newCustomerModel" class="btn btn-success">New</button>
                <div id="newCustomerModel" class="modal" tabindex="-1">
                    <div class="modal-dialog">
                        <div class="modal-content">
                            <div class="modal-header" style="background-color: #3498db">
                                <h5 class="modal-title">New Customer</h5>
                                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                            </div>
                            <div class="modal-body">
                                <div class="mb-3">
                                    <label for="txtNewCustomerID" class="form-label">Customer ID :</label>
                                    <input type="text" class="form-control" id="txtNewCustomerID" placeholder="C001">
                                </div>
                                <div class="mb-3">
                                    <label for="txtNewCustomerNIC" class="form-label">Customer NIC :</label>
                                    <input type="text" class="form-control" id="txtNewCustomerNIC" placeholder="C001">
                                </div>
                                <div class="mb-3">
                                    <label for="txtNewCustomerName" class="form-label">Customer Name :</label>
                                    <input type="text" class="form-control" id="txtNewCustomerName" placeholder="Viraj">
                                </div>
                                <div class="mb-3">
                                    <label for="txtNewCustomerSalary" class="form-label">Salary :</label>
                                    <input type="number" class="form-control" id="txtNewCustomerSalary" placeholder="1000000.00">
                                </div>
                                <div class="mb-3">
                                    <label for="txtNewCustomerAddress" class="form-label">Address :</label>
                                    <input type="text" class="form-control" id="txtNewCustomerAddress" placeholder="Bandaragama">
                                </div>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                                <button type="submit" id="btnCustomerSave" class="btn btn-primary">Save</button>
                            </div>
                        </div>
                    </div>
                </div>
            </dic>
        </div>
    </div>
    <div class="my-custom-scrollbar table-wrapper-scroll-y" style="height: 339px">
        <table id="tblCustomer" class="table" style="background-color: #ffffff">
            <thead class="table-success">
            <tr>
                <th class="col-3">Customer ID</th>
                <th class="col-3">NIC</th>
                <th class="col-3">Name</th>
                <th class="col-2">Salary</th>
                <th class="col-2">Address</th>
            </tr>
            </thead>
            <tbody id="tblCustomerBody">

            </tbody>
        </table>
    </div>
</section>

<!--item-->
<section id="item">
    <h6>Home>Items</h6>
    <div class="container-fluid">
        <div class="row" style=";background-color: #ffffff;border: 15px solid #f1f1f1;">
            <div class="col-lg-12" style="padding: 0;">
                <span style="padding-left: 10px">Item Search</span>
            </div>
            <div class="col-lg-9">
                <input id="txtSearch" style="width: 95%;margin-left: 20px;margin-top: 20px;margin-bottom: 20px" type="text" placeholder="Input Item Name/Code Here">
            </div>
            <div class="col-lg-1">
                <select id="selectSearchType" style="width: 100px;margin: 20px" class="form-select">
                    <option selected>Name</option>
                    <option>Code</option>
                </select>
            </div>
            <div class="col-lg-1">
                <button id="btnSearch" type="submit" style="font-weight: bold;margin: 20px" data-bs-toggle="modal" data-bs-target="#editItemModel" class="btn btn-primary">Search</button>
            </div>
        </div>
        <div class="row">
            <dic class="col-lg-1">
                <button type="button" disabled id="btnItemEdit"  style="width: 100px;margin: 10px" data-bs-toggle="modal" data-bs-target="#editItemModel" class="btn btn-warning">Edit</button>
                <div id="editItemModel" class="modal" tabindex="-1">
                    <div class="modal-dialog">
                        <div class="modal-content">
                            <div class="modal-header" style="background-color: #3498db">
                                <h5 class="modal-title">Update Item</h5>
                                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                            </div>
                            <div class="modal-body">
                                <div class="mb-3">
                                    <label for="txtEditItemCode" class="form-label">Item Code :</label>
                                    <input type="text" class="form-control" id="txtEditItemCode" placeholder="I001">
                                </div>
                                <div class="mb-3">
                                    <label for="txtEditItemName" class="form-label">Item Name :</label>
                                    <input type="text" class="form-control" id="txtEditItemName" placeholder="Keerisamba 5kg">
                                </div>
                                <div class="mb-3">
                                    <label for="txtEditItemPrice" class="form-label">Item Price :</label>
                                    <input type="number" class="form-control" id="txtEditItemPrice" placeholder="525.00">
                                </div>
                                <div class="mb-3">
                                    <label for="txtEditItemQuantity" class="form-label">Item Quantity</label>
                                    <input type="number" class="form-control" id="txtEditItemQuantity" placeholder="2">
                                </div>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                                <button type="button" id="btnItemUpdate" class="btn btn-primary">Update</button>
                                <button type="button" id="btnItemDelete" data-bs-dismiss="modal" class="btn btn-danger">Delete</button>
                            </div>
                        </div>
                    </div>
                </div>
            </dic>
            <div class="col-lg-1">
                <button type="button" id="btnItemNew" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#newItemModel" style="width: 100px;margin: 10px">New</button>
                <div id="newItemModel" class="modal" tabindex="-1">
                    <div class="modal-dialog">
                        <div class="modal-content">
                            <div class="modal-header" style="background-color: #3498db">
                                <h5 class="modal-title">New Item</h5>
                                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                            </div>
                            <div class="modal-body">
                                <div class="mb-3">
                                    <label for="txtNewItemCode" class="form-label">Item Code :</label>
                                    <input type="text" class="form-control" id="txtNewItemCode" placeholder="I001">
                                </div>
                                <div class="mb-3">
                                    <label for="txtNewItemName" class="form-label">Item Name :</label>
                                    <input type="text" class="form-control" id="txtNewItemName" placeholder="Keerisamba 5kg">
                                </div>
                                <div class="mb-3">
                                    <label for="txtNewItemPrice" class="form-label">Item Price :</label>
                                    <input type="number" class="form-control" id="txtNewItemPrice" placeholder="525.00">
                                </div>
                                <div class="mb-3">
                                    <label for="txtNewItemQuantity" class="form-label">Item Quantity</label>
                                    <input type="number" class="form-control" id="txtNewItemQuantity" placeholder="2">
                                </div>
                            </div>
                            <div class="modal-footer">
                                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                                <button type="submit" id="btnItemSave" class="btn btn-primary">Save</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="my-custom-scrollbar table-wrapper-scroll-y" style="height: 339px">
        <table id="tblItem" class="table" style="background-color: #ffffff">
            <thead class="table-success">
            <tr>
                <th class="col-3">Item Code</th>
                <th class="col-3">Item Name</th>
                <th class="col-2">Quantity</th>
                <th class="col-2">Price</th>
            </tr>
            </thead>
            <tbody id="tblItemBody"></tbody>
        </table>
    </div>
</section>

<!--order-->
<section id="order">
    <h6>Home>Orders</h6>
    <div class="container-fluid">
        <div class="row">
            <div class="col-lg-4">
                <div class="row">
                    <span>Invoice Details</span>
                </div>
                <div class="row" >
                    <div class="col-lg-12">
                        <form class="row g-3">
                            <div class="col-lg-6">
                                <label for="inputOrderId" class="form-label">Order ID :</label>
                                <input type="text" class="form-control" placeholder="O001" id="inputOrderId">
                            </div>
                            <div class="col-lg-6">
                                <label for="inputDate" class="form-label">Date :</label>
                                <input type="date" class="form-control" placeholder="07/06/2020" id="inputDate">
                            </div>
                            <div class="col-lg-6">
                                <label for="inputCustomerId" class="form-label">Customer ID:</label>
                                <select id="inputCustomerId" class="form-select">
                                    <option selected>C001</option>
                                    <option>C002</option>
                                    <option>C003</option>
                                    <option>C004</option>
                                </select>
                            </div>
                            <div class="col-lg-6">
                                <label for="inputCustomerNIC" class="form-label">Customer NIC :</label>
                                <input type="text" class="form-control" placeholder="200202502850" id="inputCustomerNIC">
                            </div>
                            <div class="col-lg-6">
                                <label for="inputName" class="form-label">Name :</label>
                                <input type="text" class="form-control" placeholder="Viraj" id="inputName">
                            </div>
                            <div class="col-lg-6">
                                <label for="inputSalary" class="form-label">Salary :</label>
                                <input type="number" class="form-control" placeholder="1000000.00" id="inputSalary">
                            </div>
                            <div class="col-12" style="margin-bottom: 25px">
                                <label for="inputAddress" class="form-label">Address :</label>
                                <input type="text" class="form-control" id="inputAddress" placeholder="Bandaragama">
                            </div>
                        </form>
                    </div>
                </div>
            </div>
            <div class="col-lg-5">
                <div class="row">
                    <span>Item Select</span>
                </div>
                <div class="row">
                    <div class="col-lg-12">
                        <form class="row g-3 ">
                            <div class="col-lg-6">
                                <label for="inputItem" class="form-label">Item Code :</label>
                                <select id="inputItem" class="form-select">
                                    <option selected>Choose...</option>
                                    <option>I001</option>
                                    <option>I002</option>
                                    <option>I003</option>
                                    <option>I004</option>
                                </select>
                            </div>
                            <div class="col-lg-6">
                                <label for="inputDescription" class="form-label">Description :</label>
                                <input type="text" class="form-control" id="inputDescription" placeholder="Keerisamba 5Kg">
                            </div>
                            <div class="col-lg-6">
                                <label for="inputUnitPrice" class="form-label">Unit Price :</label>
                                <input type="number" class="form-control" id="inputUnitPrice" placeholder="525.00">
                            </div>
                            <div class="col-lg-6">
                                <label for="inputQtyOnH" class="form-label">Qty On Hand :</label>
                                <input type="number" class="form-control" id="inputQtyOnH" placeholder="525.00">
                            </div>
                            <div class="col-lg-12">
                                <label for="inputQty" class="form-label">Order Quantity :</label>
                                <input type="number" class="form-control" id="inputQty" placeholder="2">
                            </div>
                            <div class="col-auto me-auto"></div>
                            <div class="col-auto" style="margin-top: 35px; margin-bottom: 25px">
                                <button type="button" id="btnOrderAddItem" class="justify-content-end btn btn-primary">Add Item</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
            <div class="col-lg-3">
                <form  class="row g-3 summery">
                    <div class="col-lg-12" style="color: #3498db;font-weight: bold; font-size: 22px">
                        Total :
                        <label id="lblTotal">1050</label>
                        Rs/=
                    </div>
                    <div class="col-lg-12" style="color: #2ecc71;font-weight: bold; font-size: 22px">
                        SubTotal :
                        <label id="lblSubTotal">945</label>
                        Rs/=
                    </div>
                    <div class="col-lg-6">
                        <label for="inputCash" class="form-label">Cash :</label>
                        <input type="number" class="form-control" id="inputCash" placeholder="5000">
                    </div>
                    <div class="col-lg-6">
                        <label for="inputDiscount" class="form-label">Discount :</label>
                        <input type="number" class="form-control" id="inputDiscount" placeholder="10">
                    </div>
                    <div class="col-lg-12">
                        <label for="inputBalance" class="form-label">Balance :</label>
                        <input type="number" class="form-control" id="inputBalance" placeholder="10">
                    </div>
                    <div align="center" class="col-lg-12 center-block" style="margin-bottom: 30px">
                        <button type="button" id="btnOrderPurchase" style="font-weight: bold" class="btn btn-success">Purchase</button>
                    </div>
                </form>
            </div>
        </div>
        <div class="col-lg-12">
            <div class="my-custom-scrollbar table-wrapper-scroll-y" style="height: 132px">
                <table class="table" style="background-color: #ffffff">
                    <thead class="table-dark">
                    <tr>
                        <th class="col-3">Item Code</th>
                        <th class="col-3">Item Name</th>
                        <th class="col-2">Price</th>
                        <th class="col-2">Quantity</th>
                        <th class="col-2">Total</th>
                    </tr>
                    </thead>
                    <tbody id="tblItemCart"></tbody>
                </table>
            </div>
        </div>
    </div>
</section>

<script src="assets/lib/jQuery/jquery-3.6.4.min.js"></script>
<script src="assets/db/DB.js"></script>

<script type="module" src="controller/CustomerController.js"></script>
<script type="module" src="model/Customer.js"></script>

<script type="module" src="controller/ItemController.js"></script>
<script type="module" src="model/Item.js"></script>

<script>
 // Customer Section

    // save customer
    // $("#btnSaveCustomer").click(function () {
    //     let customerId = $("#customerID").val();
    //     let customerName = $("#customerID").val();
    //     let customerAge = $("#customerAge").val();
    //     let customerSalary = $("#customerSalary").val();
    //     let customerTP = $("#customerTP").val();
    //
    //     var customerObject = {
    //         id:customerId,
    //         name:customerName,
    //         age:customerAge,
    //         salary:customerSalary,
    //         tp:customerTP
    //     }
    //     customerDB.push(customerObject);
    //
    //     function loadALlCustomers() {
    //         $("#customerTable").empty();
    //         for (var i in customerDB){
    //             var row =`<tr><td>${customerDB[i].id}</td><td>${customerDB[i].name}</td><td>${customerDB[i].age}</td><td>${customerDB[i].salary}</td><td>${customerDB[i].tp}</td></tr>`
    //             $("#customerTable").append(row);
    //         }
    //     }
    //     loadALlCustomers();
    // });

    // search customer
   // $("#searchCustomer").click(function () {
   //      let customerId = $("#txtSearchCustomer").val();
   //      let searchCustomers1 = searchCustomers(customerId);
   //      if (searchCustomers1){
   //         $("#customerID").val(customerDB[searchCustomers1].id);
   //         $("#customerName").val(customerDB[searchCustomers1].name);
   //         $("#customerAge").val(customerDB[searchCustomers1].age);
   //         $("#customerSalary").val(customerDB[searchCustomers1].salary);
   //         $("#customerTP").val(customerDB[searchCustomers1].tp);
   //      }else{
   //          alert("Not Found Customer");
   //      }
   // });
   //
   //  function searchCustomers(customerId) {
   //      for (let i = 0 ; i< customerDB.length+1 ; i++){
   //          if (customerDB[i].id==customerId){
   //              return i;
   //          }
   //      }
   //  }



    // item Section
     $("#saveItemBtn").click(function () {
         let ItemId = $("#itemID").val();
         let ItemName = $("#itemName").val();
         let ItemQty = $("#itemQty").val();
         let ItemPrice = $("#itemUnitPrice").val();

         var itemObject = {
             id :ItemId,
             name:ItemName,
             qty:ItemQty,
             price:ItemPrice
         };
         ItemDB.push(itemObject);

         function loadAllItems() {
             $("#itemTable").empty();
             for(var i in ItemDB){
                 var row = `<tr><td>${ItemDB[i].id}</td><td>${ItemDB[i].name}</td><td>${ItemDB[i].qty}</td><td>${ItemDB[i].price}</td></tr>`;
                 $("#itemTable").append(row);
             }

         }
         loadAllItems();


         // var row = `<tr><td>${id}</td><td>${name}</td><td>${Qty}</td><td>${price}</td></tr>`;
         // $("#itemTable").append(row);
    //
    //
    // // click funtion
    //      $("#itemTable>tr").click(function () {
    //          let itemId = $(this).children().eq(0).text();
    //          let itemName = $(this).children().eq(1).text();
    //          let itemQty= $(this).children().eq(2).text();
    //          let itemUnitPrice= $(this).children().eq(3).text();
    //
    //         $("#itemID").val(itemId);
    //          $("#itemName").val(itemName);
    //          $("#itemQty").val(itemQty);
    //         $("#itemUnitPrice").val(itemUnitPrice);
    //      })
    //
    //
    //      $("#itemTable>tr").dblclick(function () {
    //          $(this).remove();
    //      })
    //  });
    //
    // var regEx = /^[0-9]{3}$/
    //   $("#itemID").on('keyup',function (event) {
    //       let id = $("#itemID").val();
    //
    //       if (regEx.test(id)){
    //           $("#itemID").css('border','5px solid green');
    //               if (event.key.equals("Enter")){
    //                   $("#itemName").focus();
    //               }
    //       }else{
    //           $("#itemID").css('border','5px solid red');
    //       }
      });


     $("#btnSearchItem").click(function () {
         let itemCode = $("#inputSearchItem").val();
         let searchItem1 = searchItem(itemCode);
             if (searchItem1){
                 $("#itemID").val(ItemDB.id);
                 $("#itemName").val(ItemDB.name);
                 $("#itemQty").val(ItemDB.qty);
                 $("#itemUnitPrice").val(ItemDB.price);
             }else{
                 alert("noo");
             }


     });

     function searchItem(itemCode) {
         for (let i = 0 ; i < ItemDB.length ; i++ ){
             if(ItemDB[i].id==itemCode){
                 return ItemDB[i];
             }
         }
     }
     let text = $("#thogakadeName").text();
     var position = 0;
     function animationText() {
        let s = text.substr(0,position);
         $("#thogakadeName").text(s);
        position++;
        if (s==text.length){
            position=0;
        }
     }
    //setInterval(animationText,100);

    $("#customer").css('display','none');
    $("#item").css('display','none');
    $("#order").css('display','block');

   $("#NavOrder").click(function (){
       $("#customer").css('display','none');
       $("#item").css('display','none');
       $("#order").css('display','block');
   });
    $("#NavItem").click(function (){
        $("#customer").css('display','none');
        $("#item").css('display','block');
        $("#order").css('display','none');
    });
    $("#NavCustomer").click(function (){
        $("#customer").css('display','block');
        $("#item").css('display','none');
        $("#order").css('display','none');
    });

</script>

</body>
</html>